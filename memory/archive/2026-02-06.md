# 2026-02-06 - YouTube Shorts Generator & Supermarket Scraper

## YouTube Shorts Generator
- Created complete system at `scripts/youtube_shorts/`
- Uses Groq Whisper for transcription (~$0.001/min)
- Claude Haiku analyzes transcript for interesting moments
- FFmpeg generates shorts with split layout:
  - Screen capture: 1080x590 (top)
  - Webcam: 546x500 padded to 1080x500 (bottom) - fixes aspect ratio distortion
- Successfully tested with video `USEber2sx1A` ("Tasks aumentaram em 1000% minha produtividade")
- Output: `/home/andreprado/.openclaw/workspace/shorts_output/`

## Supermarket Deals Scraper
- Tiendeo as source for Condor/Muffato flyers
- Claude Haiku Vision for OCR extraction (20x cheaper than Opus)
- Product watchlist at `scripts/produtos_monitorados.json`
- Daily cron at 8:00 AM (ID: `93bdf427-e747-4805-a588-d55a8e6d5428`)
- Saves to ofertas.json, sends email via Resend, notifies Telegram

## Shopping List App
- Running on port 8765 as systemd service
- Tailscale Funnel: `https://mediarr.tail9c9522.ts.net`
- `/ofertas` page shows current deals
- Webhook for Alexa: `/api/adicionar?item=X&token=8d17743ab43ffaf7b6e4c1837f2eb8e3`

## Technical Decisions
- FFmpeg requires even dimensions for video encoding
- Webcam uses `pad` filter (not `scale`) to maintain aspect ratio with black bars
- Groq Whisper over local transcription (i5-2400 too slow for local)
- systemd over pm2 for service management

## ViralClaw API
- Location: `~/Projects/viralclip-api/` with FastAPI
- Port: 8100 (configured in systemd service)
- **5 Caption Styles**: hormozi, mrbeast, tiktok, minimal, karaoke
- Uses Groq Whisper for transcription (~R$0.006/min)
- Llama 3.3 70B for viral moment detection via `/api/detect-moments`
- Cost tracking: SQLite at `/tmp/viralclip_output/costs.db` + CLI `scripts/check_costs.py`
- Internal cost tracking only (no public endpoint per André's request)
- Fixed issues: aiofiles→asyncio.to_thread, ASS subtitle escaping, 1080x1920 format
- Systemd service at `/etc/systemd/system/viralclip.service`

### ViralClaw Pending Fix
- Service in restart loop - missing `pkg_resources` module
- **Solution**: Install `setuptools` in venv: `source .venv/bin/activate && pip install setuptools`

## Disk Status
- 85% used, 264GB free on /mnt/ssd
- Cleaned ~200GB earlier (was at 97%)

## Pending
- Fix ViralClaw systemd service (setuptools in venv)
- Test Llama 8B vs 70B for cost optimization
- Create CLI wrapper: `viralclip video.mp4 --style mrbeast`
- Alexa Skill creation (waiting on André's developer account)
- YouTube Shorts auto-posting (needs OAuth completion)
